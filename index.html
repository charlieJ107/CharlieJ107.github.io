<!DOCTYPE html>


<html lang="zh-cn">


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Vankyle
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  

<link rel="alternate" href="/atom.xml" title="Vankyle" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/CharlieJ107"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover6.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Vankyle</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['老蒋的技术博客', '自闭码农, 暴躁老哥', '吃好喝好，没有烦恼'],
        startDelay: 0,
        typeSpeed: 500,
        loop: true,
        backSpeed: 500,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-MSP432学习笔记-GPIO基本输入输出"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/Tutorial/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-GPIO%E5%9F%BA%E6%9C%AC%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA.html"
    >MSP432学习笔记-GPIO基本输入输出</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/Tutorial/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-GPIO%E5%9F%BA%E6%9C%AC%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA.html" class="article-date">
  <time datetime="2020-12-19T16:00:00.000Z" itemprop="datePublished">2020-12-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tutorial/">Tutorial</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>​    让GPIO基本输入输出的主要包含两个部分， 这个跟Arduino的思路是一样的。首先你需要在Initial阶段确定你要用哪个端口，每个端口是用来干什么的，是输入还是输出。</p>
<p>​    然后你就要软件当中做两种可能你想做的事情：</p>
<ul>
<li>如果你想用GPIO输出，你就给整个GPIO口的输出状态赋值</li>
<li>如果你要用GPIO读取输入，你就要去读取整个GPIO输入的地方是多少</li>
</ul>
<h3 id="重要：寄存器的赋值语句"><a href="#重要：寄存器的赋值语句" class="headerlink" title="重要：寄存器的赋值语句"></a>重要：寄存器的赋值语句</h3><p>该位赋值为1：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p1-&gt;OUT |= BIT0;</span><br></pre></td></tr></table></figure>

<p>该为赋值为0：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">P1-&gt;OUT &amp;= ~(BIT0);</span><br></pre></td></tr></table></figure>

<p>该位反转：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">P1-&gt;OUT ^= BIT0;</span><br></pre></td></tr></table></figure>

<h3 id="初始化寄存器配置"><a href="#初始化寄存器配置" class="headerlink" title="初始化寄存器配置"></a>初始化寄存器配置</h3><p>首先你看看MSP432到底是怎么搞这GPIO的配置</p>
<h4 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">P1-&gt;DIR |= BIT0; <span class="comment">//方向设置为输出方向</span></span><br><span class="line">P1-&gt;OUT |= BIT0; <span class="comment">//设置为高电平</span></span><br></pre></td></tr></table></figure>

<p>当<code>DIR</code>设置为输出时，OUT决定输出高（1）低（0）电平；当<code>DIR</code>设置为输入时，OUT决定是上拉还是下拉。</p>
<h4 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">P1-&gt;DIR &amp;= ~BIT1；</span><br><span class="line">P1-&gt;OUT = BIT1;</span><br></pre></td></tr></table></figure>



<h3 id="读取输入"><a href="#读取输入" class="headerlink" title="读取输入"></a>读取输入</h3><p>GPIO口有一个只读的寄存器<code>PxIN</code>, 整个位可以直接读出整个地方是高电平（1）还是低电平（0）。</p>
<h3 id="其他你可能用到的寄存器"><a href="#其他你可能用到的寄存器" class="headerlink" title="其他你可能用到的寄存器"></a>其他你可能用到的寄存器</h3><h4 id="PxREN"><a href="#PxREN" class="headerlink" title="PxREN"></a><code>PxREN</code></h4><p>配置上下拉电阻</p>
<h4 id="PxSEL"><a href="#PxSEL" class="headerlink" title="PxSEL"></a><code>PxSEL</code></h4><p>功能选择寄存器</p>
<table>
<thead>
<tr>
<th>PxSEL1</th>
<th>PxSEL0</th>
<th>I/O 功能</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0</td>
<td>普通IO</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>主模块功能</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>次模块功能</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>第三模块功能</td>
</tr>
</tbody></table>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MSP432/" rel="tag">MSP432</a></li></ul>

    </footer>
  </div>

   
   
</article>

    
    <article
  id="post-MSP432学习笔记-Timer A计时器"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/Tutorial/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Timer%20A%E8%AE%A1%E6%97%B6%E5%99%A8.html"
    >MSP432学习笔记-Timer A计时器</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/Tutorial/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Timer%20A%E8%AE%A1%E6%97%B6%E5%99%A8.html" class="article-date">
  <time datetime="2020-12-19T16:00:00.000Z" itemprop="datePublished">2020-12-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tutorial/">Tutorial</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="定时器概述"><a href="#定时器概述" class="headerlink" title="定时器概述"></a>定时器概述</h3><p>定时器的本质其实就是一个<strong>寄存器在时钟脉冲下周期性地进行增减</strong>.</p>
<p>MSP432上定时器有这么几个资源</p>
<ul>
<li>看门狗</li>
<li>实时时钟RTC_C</li>
<li>SysTick</li>
<li>Timer A（16位）</li>
<li>Timer 32（32位）</li>
</ul>
<p>其中，Timer A和Timer 32都是通用定时器，而其他的都属于特殊功能的定时器。</p>
<h3 id="Timer-A定时器"><a href="#Timer-A定时器" class="headerlink" title="Timer A定时器"></a>Timer A定时器</h3><p>包括四个时钟源： <code>TAxCLK</code>, <code>ACLK</code>,, <code>SMCLK</code>, <code>INCLK</code>, 两个分频单元<code>ID</code>, <code>IDEX</code>,然后有一个16位的计时器<code>Timer</code>, 符号是<code>TAxR</code>. 一旦溢出就会向<code>TAxCTL</code>的<code>TAIFG</code>这个寄存器写入一个值，这个时候CPU就可以捕捉这个值来进行控制。</p>
<p>这个时候通过MC控制位可以控制Timer A的计数模式</p>
<ul>
<li>连续计数：一直计数到溢出，然后一直计数到归零，再一直计数到溢出</li>
<li>向上模式：计数到CCR[0]中断触发，然后清零，再计数到CCR[0]</li>
<li>向上/向下模式：计数到CCR[0]中断触发，然后递减计数到0，再计数到CCR[0]</li>
<li>暂停</li>
</ul>
<h4 id="连续计数模式"><a href="#连续计数模式" class="headerlink" title="连续计数模式"></a>连续计数模式</h4><p>其实就是一路计数到溢出, 然后翻转成0, 从0从新开始. </p>
<p>另外, 反转的时候会给<code>TAxCTL TAIFG</code>这个中断标志位置1. </p>
<p>程序<code>ta0_03</code>这个程序是用Timer A来实现LED的闪烁. 这个闪烁实现的是用Timer A的定时实现的, 每次溢出来实现一次闪烁. </p>
<p>首先, 整个程序分为两个部分, 一个是主程序, 主程序的任务其实就是配置初始化. </p>
<p>标准操作, 关<code>WDT</code>,设置GPIO输出, 初始化高电平. </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">WDT_A-&gt;CTL = WDT_A_CTL_PW |             <span class="comment">// Stop WDT</span></span><br><span class="line">        WDT_A_CTL_HOLD;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Configure GPIO</span></span><br><span class="line">P1-&gt;DIR |= BIT0;</span><br><span class="line">P1-&gt;OUT |= BIT0;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>然后的动作就是配置定时器,  启用中断系统. 然后就可以休眠了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Configure Timer_A</span></span><br><span class="line">   TIMER_A0-&gt;CTL = TIMER_A_CTL_SSEL__SMCLK |  <span class="comment">// SMCLK</span></span><br><span class="line">           TIMER_A_CTL_MC_2 |              <span class="comment">// Continuous mode</span></span><br><span class="line">           TIMER_A_CTL_CLR |               <span class="comment">// Clear TAR</span></span><br><span class="line">           TIMER_A_CTL_ID_3 |              <span class="comment">// CLKDIV</span></span><br><span class="line">           TIMER_A_CTL_IE ;                 <span class="comment">// Enable overflow interrupt</span></span><br><span class="line">	SCB-&gt;SCR |= SCB_SCR_SLEEPONEXIT_Msk;    <span class="comment">// Enable sleep on exit from ISR</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// Ensures SLEEPONEXIT takes effect immediately</span></span><br><span class="line">   __DSB();</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Enable global interrupt</span></span><br><span class="line">   __enable_irq();</span><br><span class="line"></span><br><span class="line">   NVIC-&gt;ISER[<span class="number">0</span>] = <span class="number">1</span> &lt;&lt; ((TA0_N_IRQn) &amp; <span class="number">31</span>);</span><br><span class="line"></span><br><span class="line">   __sleep();</span><br><span class="line"></span><br><span class="line">   __no_operation();                       <span class="comment">// For debugger</span></span><br></pre></td></tr></table></figure>

<p>这其中, 首先设置的是时钟源</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TIMER_A0-&gt;CTL = TIMER_A_CTL_SSEL__SMCLK |  <span class="comment">// SMCLK</span></span><br></pre></td></tr></table></figure>

<p>再下来一个是选择分频系数</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IMER_A_CTL_ID_3 |              <span class="comment">// CLKDIV</span></span><br></pre></td></tr></table></figure>

<p>然后则是<code>MC</code>寄存器来决定工作模式, 这个工作模式有这么几种情况, 包括停止模式(<code>stop</code>, <code>00</code>), 上升模式(<code>up</code>, <code>01</code>) , 连续模式(<code>contiuouse</code>, <code>10</code>)和上升/下降模式(<code>up/down</code>, <code>11</code>). </p>
<p>然后就是清空<code>TAR</code>, 这个<code>TAR</code>就是Timer A的寄存器, 一共16位,  也就是0-65535. 溢出的时候就触发一次中断. 使能中断<code>TAIE</code>, 给中断标志位预置数<code>TAIFG</code>..</p>
<p>这里有一个操作</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SCB-&gt;SCR |= SCB_SCR_SLEEPONEXIT_Msk;    <span class="comment">// Enable sleep on exit from ISR</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// Ensures SLEEPONEXIT takes effect immediately</span></span><br><span class="line">   __DSB();</span><br></pre></td></tr></table></figure>

<p>这个操作可以保证CPU响应中断之后重新进入休眠模式. </p>
<p>接下来要考虑的是中断服务函数. 中断服务函数的任务也很简单, 因为只需要闪烁, 所以反转LED的输出电平就可以了. </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TA0_N_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    TIMER_A0-&gt;CTL &amp;= ~TIMER_A_CTL_IFG;      <span class="comment">// Clear timer overflow interrupt flag</span></span><br><span class="line">    P1-&gt;OUT ^= BIT0;                        <span class="comment">// Toggle P1.0 LED</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="其他工作模式与CCR寄存器"><a href="#其他工作模式与CCR寄存器" class="headerlink" title="其他工作模式与CCR寄存器"></a>其他工作模式与CCR寄存器</h3><p>​    之所以要引入CCR寄存器, 是因为CCR寄存器具备这样几个特征:</p>
<ul>
<li>可以设置为0-最大值的任意数值</li>
<li>不会干扰<code>TAR</code>, 也就是Timer A的本身寄存器的溢出的过程</li>
<li>可以用<code>TAR</code>计数跟他比较, 等于它的时候可以发出一个中断</li>
</ul>
<p>CCR总共有7个, CCR0到CCR6. 有一个比较器, 只要<code>TAR</code>跟<code>CCR</code>相同的时候就可以触发一个中断. </p>
<p>这里的例子是官方例子的<code>ta0_01</code>. 这个例子是用CCR寄存器控制led灯闪烁的频率. </p>
<p>具体的思路其实是, 设定一个CCR初始值. CCR的作用是比较一个值, 一旦比较相同, 则触发中断. </p>
<p>主函数的设定跟之前差不多, 最大的区别是增加了CCR寄存器的判断. 比较捕获寄存器<code>CCR[0]</code>寄存器的控制在<code>TIMER_A0-&gt;CCTL[0]</code>这个控制寄存器里. 通过这个寄存器使能中断, 并给<code>CCR[0]</code>设定初始值, 所以有了这样的语句:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TIMER_A0-&gt;CCTL[<span class="number">0</span>] = TIMER_A_CCTLN_CCIE; <span class="comment">// TACCR0 interrupt enabled</span></span><br><span class="line">TIMER_A0-&gt;CCR[<span class="number">0</span>] = <span class="number">50000</span>;</span><br></pre></td></tr></table></figure>

<p>接下来则是通用的给Timer A设置时钟源和工作模式, 使能中断, 然后就可以休眠了. 整个主函数的内容如下: </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    WDT_A-&gt;CTL = WDT_A_CTL_PW |             <span class="comment">// Stop WDT</span></span><br><span class="line">            WDT_A_CTL_HOLD;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Configure GPIO</span></span><br><span class="line">    P1-&gt;DIR |= BIT0;</span><br><span class="line">    P1-&gt;OUT |= BIT0;</span><br><span class="line"></span><br><span class="line">    TIMER_A0-&gt;CCTL[<span class="number">0</span>] = TIMER_A_CCTLN_CCIE; <span class="comment">// TACCR0 interrupt enabled</span></span><br><span class="line">    TIMER_A0-&gt;CCR[<span class="number">0</span>] = <span class="number">50000</span>;</span><br><span class="line">    TIMER_A0-&gt;CTL = TIMER_A_CTL_SSEL__SMCLK | <span class="comment">// SMCLK, continuous mode</span></span><br><span class="line">            TIMER_A_CTL_MC__CONTINUOUS;</span><br><span class="line"></span><br><span class="line">    SCB-&gt;SCR |= SCB_SCR_SLEEPONEXIT_Msk;    <span class="comment">// Enable sleep on exit from ISR</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Ensures SLEEPONEXIT takes effect immediately</span></span><br><span class="line">    __DSB();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Enable global interrupt</span></span><br><span class="line">    __enable_irq();</span><br><span class="line"></span><br><span class="line">    NVIC-&gt;ISER[<span class="number">0</span>] = <span class="number">1</span> &lt;&lt; ((TA0_0_IRQn) &amp; <span class="number">31</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        __sleep();</span><br><span class="line"></span><br><span class="line">        __no_operation();                   <span class="comment">// For debugger</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>对于中断服务函数, 中断服务函数是在<code>TAR</code>与<code>CCR[0]</code>的寄存器比较后发现相同的时候触发. 这个时候要做的事情除了清零中断标志位, 翻转LED外, 还要给<code>CCR[0]</code>寄存器重新赋值. 这个赋值我们这样考虑: <code>CCR[0]</code>寄存器总共有16位, 跟<code>TAR</code>一致. 最大是65535. 因为我们最开始设定未50000, 那么最后如果这个再网上加15536个数, 就会变成0. 对于<code>ta0_01</code>这个例程中, 它的中断服务函数是直接加上50000, 那这个时候<code>CCR[0]</code>就会变成65535-5000=15535. 然后再从下次再捕获到<code>TAR</code>记录到15536的时候就会再次触发中断, 然后再加上50000就会回到0, 再从0记起到50000, +50000变成15535…</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Timer A0 interrupt service routine</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TA0_0_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    TIMER_A0-&gt;CCTL[<span class="number">0</span>] &amp;= ~TIMER_A_CCTLN_CCIFG;</span><br><span class="line">    P1-&gt;OUT ^= BIT0;</span><br><span class="line">    TIMER_A0-&gt;CCR[<span class="number">0</span>] += <span class="number">50000</span>;              <span class="comment">// Add Offset to TACCR0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里注意, <code>CCR[0]</code>的中断触发出来的中断向量是<code>TA0_0</code>, 中断服务函数的名称是<code>TA0_0_IRQHandler</code>, 而其他的<code>CCR[1]-CCR[6]</code>都共用同一个中断向量<code>TA0_N</code>, 中断服务函数名称是<code>TA0_N_IRQHandler</code>. 这就带来了一个问题, 就是这个中断函数被触发的时候, 你是不知道到底是哪个中断标志位引起的中断. 所以你需要逐个判断中断标志位, 然后再进行清零, 之后再接着进行你想做的事. </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TA0_N_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (TIMER_A0-&gt;CCTL[<span class="number">1</span>] &amp; TIMER_A_CCTLN_CCIFG)</span><br><span class="line">    &#123;</span><br><span class="line">        TIMER_A0-&gt;CCTL[<span class="number">1</span>] &amp;= ~TIMER_A_CCTLN_CCIFG;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (TIMER_A0-&gt;CCTL[<span class="number">2</span>] &amp; TIMER_A_CCTLN_CCIFG)</span><br><span class="line">    &#123;</span><br><span class="line">        TIMER_A0-&gt;CCTL[<span class="number">2</span>] &amp;= ~TIMER_A_CCTLN_CCIFG;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Timer-A-结合-CCR【0】的工作模式"><a href="#Timer-A-结合-CCR【0】的工作模式" class="headerlink" title="Timer A 结合 CCR【0】的工作模式"></a>Timer A 结合 CCR【0】的工作模式</h3><p>Timer A总共有四种工作模式，其中，向上，向上/向下都是需要CCR[0]寄存器来配合的。</p>
<h3 id="Timer-A-的输入捕获功能"><a href="#Timer-A-的输入捕获功能" class="headerlink" title="Timer A 的输入捕获功能"></a>Timer A 的输入捕获功能</h3><p><img src="https://data-vankyle-1257862518.cos.ap-shanghai.myqcloud.com/image/Typora-auto/image-20201123160813978.png" alt="image-20201123160813978"></p>
<p>首先有个CCIS来选择捕获源，捕获源可以选择的有：</p>
<ul>
<li>CCI6A</li>
<li>CCI6B</li>
<li>GND</li>
<li>VCC</li>
</ul>
<p>然后选择捕获模式，也就是CM寄存器：上边沿，下边沿，或者上下边沿都捕获</p>
<p>接下来选择时间同步模式，因为你想捕获的信号跟时钟信号有时候是不同步的，这个时候你需要一个东西来选择是否同步。 这个控制位是<code>SCS</code>. 如果你想读取同步过的信号,就读<code>SCCI</code>这个寄存器的值, 如果你不关心是否同步, 就读取<code>CCI</code>这个寄存器的值. </p>
<p>如果一切顺利, 单片机正常捕获, 就会将捕获信号存储在 CCR 寄存器里面. </p>
<p>有这么一种特殊情况, 如果CCR捕获之后还没来得及处理, 下一次捕获就又发生了, 这个时候CCR寄存器内捕获的内容会被冲刷掉, 但是会有一个标志位<code>COV</code>你可以读取到这个情况的发生. </p>
<h3 id="利用定时器输出PWM"><a href="#利用定时器输出PWM" class="headerlink" title="利用定时器输出PWM"></a>利用定时器输出PWM</h3><p>定时器输出PWM的关键在于, 在一定时间内调整GPIO口的翻转, 说白了就是用CCR.</p>
<p>首先有一个周期计数器, 实现一个周期的确定, 通常用CCR0;</p>
<p>然后你需要有一个计时器来控制PWM的占空比, 所以需要一个高电平的计数器, 通常是其他的CCR, 比如CCR2</p>
<h3 id="实例-利用Timer-A的CCR和中断实现呼吸灯"><a href="#实例-利用Timer-A的CCR和中断实现呼吸灯" class="headerlink" title="实例: 利用Timer A的CCR和中断实现呼吸灯"></a>实例: 利用Timer A的CCR和中断实现呼吸灯</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 呼吸灯</span></span><br><span class="line"><span class="comment"> */</span> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;msp.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RATIO_STEP 0.01</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_PERCENT 0.9</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MIN_PERCENT 0.01</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXVALUE CCR0VALUE *MAX_PERCENT</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MINVALUE CCR0VALUE *MIN_PERCENT</span></span><br><span class="line"><span class="keyword">int</span> step;</span><br><span class="line"><span class="keyword">volatile</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">volatile</span> <span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> flag1 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> flag2 = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        WDT_A-&gt;CTL = WDT_A_CTL_PW | <span class="comment">// Stop WDT</span></span><br><span class="line">                     WDT_A_CTL_HOLD;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Configure GPIO</span></span><br><span class="line">        P6-&gt;DIR |= BIT6 | BIT7; <span class="comment">// P6.6~7 set TA1.1~2</span></span><br><span class="line">        P6-&gt;SEL0 |= BIT6 | BIT7;</span><br><span class="line">        P6-&gt;SEL1 &amp;= ~(BIT6 | BIT7);</span><br><span class="line"></span><br><span class="line">        TIMER_A2-&gt;CCR[<span class="number">0</span>] = <span class="number">5000</span>; <span class="comment">// CCR0用来控制一整个呼吸灯的周期</span></span><br><span class="line">        <span class="comment">//CCR3用来控制变亮的这个半周期</span></span><br><span class="line">        TIMER_A2-&gt;CCTL[<span class="number">3</span>] = TIMER_A_CCTLN_OUTMOD_7; <span class="comment">// CCR3 reset/set</span></span><br><span class="line">        TIMER_A2-&gt;CCR[<span class="number">3</span>] = <span class="number">5000</span>;                    <span class="comment">// CCR3 PWM duty cycle</span></span><br><span class="line">        <span class="comment">//CCR4用来控制变暗的这个半周期</span></span><br><span class="line">        TIMER_A2-&gt;CCTL[<span class="number">4</span>] = TIMER_A_CCTLN_OUTMOD_7; <span class="comment">// CCR4 reset/set</span></span><br><span class="line">        TIMER_A2-&gt;CCR[<span class="number">4</span>] = <span class="number">0</span>;                       <span class="comment">// CCR4 PWM duty cycle</span></span><br><span class="line"></span><br><span class="line">        TIMER_A2-&gt;CTL = TIMER_A_CTL_SSEL__SMCLK | TIMER_A_CTL_MC__UP | <span class="comment">// Up mode </span></span><br><span class="line">                        TIMER_A_CTL_CLR;                               <span class="comment">// Clear</span></span><br><span class="line">        <span class="comment">//如果CCR0溢出, 则会触发CCR Interrupt Flag</span></span><br><span class="line">        <span class="comment">//给CCR[0]的 Interrupt Flag 清零</span></span><br><span class="line">        TIMER_A2-&gt;CCTL[<span class="number">0</span>] &amp;= ~TIMER_A_CCTLN_CCIFG;</span><br><span class="line">        <span class="comment">//CCR中断Enable</span></span><br><span class="line">        TIMER_A2-&gt;CCTL[<span class="number">0</span>] = TIMER_A_CCTLN_CCIE;</span><br><span class="line"></span><br><span class="line">        SCB-&gt;SCR |= SCB_SCR_SLEEPONEXIT_Msk;</span><br><span class="line">        __DSB();</span><br><span class="line">        __enable_irq();</span><br><span class="line">        NVIC-&gt;ISER[<span class="number">0</span>] = <span class="number">1</span> &lt;&lt; ((TA2_0_IRQn)&amp;<span class="number">31</span>);</span><br><span class="line">        <span class="comment">// Enter LPM0</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">                __sleep();</span><br><span class="line">                __no_operation(); <span class="comment">// For debugger</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//CCR0溢出, 触发的中断服务函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TA2_0_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="comment">//先清零中断向量寄存器</span></span><br><span class="line">        TIMER_A2-&gt;CCTL[<span class="number">0</span>] &amp;= ~TIMER_A_CCTLN_CCIFG;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果CCR3</span></span><br><span class="line">        <span class="keyword">if</span> (TIMER_A2-&gt;CCR[<span class="number">3</span>] &gt;= <span class="number">4800</span>)</span><br><span class="line">        &#123;</span><br><span class="line">                flag1 = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (TIMER_A2-&gt;CCR[<span class="number">3</span>] &lt;= <span class="number">100</span>)</span><br><span class="line">        &#123;</span><br><span class="line">                flag1 = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//flag1说明CCR3是否处在高位</span></span><br><span class="line">        <span class="keyword">if</span> (flag1)</span><br><span class="line">        &#123;</span><br><span class="line">                TIMER_A2-&gt;CCR[<span class="number">3</span>] -= <span class="number">5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">                <span class="comment">//CCR3处在低位</span></span><br><span class="line">                TIMER_A2-&gt;CCR[<span class="number">3</span>] += <span class="number">5</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (TIMER_A2-&gt;CCR[<span class="number">4</span>] &gt;= <span class="number">4800</span>)</span><br><span class="line">        &#123;</span><br><span class="line">                flag2 = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (TIMER_A2-&gt;CCR[<span class="number">4</span>] &lt;= <span class="number">100</span>)</span><br><span class="line">        &#123;</span><br><span class="line">                flag2 = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (flag2)</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="comment">//CCR4 &gt;= 4800</span></span><br><span class="line">                TIMER_A2-&gt;CCR[<span class="number">4</span>] -= <span class="number">5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">                <span class="comment">//CCR4 &lt;= 100</span></span><br><span class="line">                TIMER_A2-&gt;CCR[<span class="number">4</span>] += <span class="number">5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在这里总结一下跟定时器有关的程序设计基本流程</p>
<ul>
<li><p>定时器一般是要配合其他东西进行操作的, 比如GPIO啥的, 所以你肯定要先配置各种GPIO之类的其他东西</p>
</li>
<li><p>接下来你可能需要给定时器设置一个工作模式</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TIMER_A2-&gt;CCTL[<span class="number">3</span>] = TIMER_A_CCTLN_OUTMOD_7; <span class="comment">// CCR3 reset/set</span></span><br></pre></td></tr></table></figure>

<p><img src="https://data-vankyle-1257862518.cos.ap-shanghai.myqcloud.com/image/Typora-auto/image-20201214195838263.png" alt="image-20201214195838263"></p>
</li>
<li><p>然后你需要先给定时器设定一个初值, 语句如下:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TIMER_A2-&gt;CCR[<span class="number">0</span>] = <span class="number">5000</span>; <span class="comment">// CCR0用来控制一整个呼吸灯的周期</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置整个Timer_A的工作模式</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TIMER_A2-&gt;CTL = TIMER_A_CTL_SSEL__SMCLK | TIMER_A_CTL_MC__UP | <span class="comment">// Up mode </span></span><br><span class="line">                       TIMER_A_CTL_CLR;                               <span class="comment">// Clear</span></span><br></pre></td></tr></table></figure>

<p><img src="https://data-vankyle-1257862518.cos.ap-shanghai.myqcloud.com/image/Typora-auto/image-20201214195812209.png" alt="image-20201214195812209"></p>
</li>
<li><p>使能CCR中断</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给CCR[0]的 Interrupt Flag 清零</span></span><br><span class="line">TIMER_A2-&gt;CCTL[<span class="number">0</span>] &amp;= ~TIMER_A_CCTLN_CCIFG;</span><br><span class="line"><span class="comment">//CCR中断Enable</span></span><br><span class="line">TIMER_A2-&gt;CCTL[<span class="number">0</span>] = TIMER_A_CCTLN_CCIE;</span><br></pre></td></tr></table></figure>

<p>CCIE这个寄存器的数据表已经在上面了</p>
</li>
<li><p>其他全局中断的使能</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SCB-&gt;SCR |= SCB_SCR_SLEEPONEXIT_Msk;</span><br><span class="line">   __DSB();</span><br><span class="line">   __enable_irq();</span><br><span class="line">   NVIC-&gt;ISER[<span class="number">0</span>] = <span class="number">1</span> &lt;&lt; ((TA2_0_IRQn)&amp;<span class="number">31</span>);</span><br></pre></td></tr></table></figure>
<p>注意NVIC的地方, 需要把中断向量名填进去, CCR0用的是<code>TA2_0_IRQn</code>, 其他的是<code>TA2_N_IRQn</code></p>
</li>
<li><p>中断服务函数（以呼吸灯为例）</p>
<p>中断什么时候被触发？</p>
<p>当Timer_A跟CCR计时器里的值一样的时候</p>
</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MSP432/" rel="tag">MSP432</a></li></ul>

    </footer>
  </div>

   
   
</article>

    
    <article
  id="post-LeetCode-98-验证二叉搜索树"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/Other/LeetCode-98-%E9%AA%8C%E8%AF%81%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91.html"
    >LeetCode 98. 验证二叉搜索树</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/Other/LeetCode-98-%E9%AA%8C%E8%AF%81%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91.html" class="article-date">
  <time datetime="2020-11-06T12:42:17.000Z" itemprop="datePublished">2020-11-06</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Other/">Other</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <!--description---> 
      <a class="article-more-link" href="/Other/LeetCode-98-%E9%AA%8C%E8%AF%81%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91.html"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Default/" rel="tag">Default</a></li></ul>

    </footer>
  </div>

   
   
</article>

    
    <article
  id="post-144.二叉树的前序遍历"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/Experience/144.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86.html"
    >LeetCode 144.二叉树的前序遍历</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/Experience/144.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86.html" class="article-date">
  <time datetime="2020-11-02T16:00:00.000Z" itemprop="datePublished">2020-11-03</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Experience/">Experience</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>简单递归，迭代算法，莫里斯算法</p> 
      <a class="article-more-link" href="/Experience/144.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%89%8D%E5%BA%8F%E9%81%8D%E5%8E%86.html"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a></li></ul>

    </footer>
  </div>

   
   
</article>

    
    <article
  id="post-C++的虚方法"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/Experience/C++%E7%9A%84%E8%99%9A%E6%96%B9%E6%B3%95.html"
    >C++虚方法</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/Experience/C++%E7%9A%84%E8%99%9A%E6%96%B9%E6%B3%95.html" class="article-date">
  <time datetime="2020-11-02T16:00:00.000Z" itemprop="datePublished">2020-11-03</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Experience/">Experience</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <!--description--->
<p>​    关键字 virtual 经常定义在C++类中的方法上. 这个关键字可以声明这个方法是一个虚方法.</p>
<p>​    虚方法的意义在于, 让程序根据实际的对象类型选择实现的函数. </p> 
      <a class="article-more-link" href="/Experience/C++%E7%9A%84%E8%99%9A%E6%96%B9%E6%B3%95.html"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>

   
   
</article>

    
    <article
  id="post-MSP432学习笔记-基本中断"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/Tutorial/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E4%B8%AD%E6%96%AD.html"
    >MSP432学习笔记-基本中断</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/Tutorial/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E4%B8%AD%E6%96%AD.html" class="article-date">
  <time datetime="2020-11-02T16:00:00.000Z" itemprop="datePublished">2020-11-03</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tutorial/">Tutorial</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>中断的本质是：实现定义好了那么多个中断向量，每个中断向量对应一个中断服务函数，整个服务函数最开始是空的，你后面想给他什么，就给他填上什么东西。</p> 
      <a class="article-more-link" href="/Tutorial/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%9F%BA%E6%9C%AC%E4%B8%AD%E6%96%AD.html"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MSP432/" rel="tag">MSP432</a></li></ul>

    </footer>
  </div>

   
   
</article>

    
    <article
  id="post-能不能不用Anaconda"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/Thinking/%E8%83%BD%E4%B8%8D%E8%83%BD%E4%B8%8D%E7%94%A8Anaconda.html"
    >我能不能不用Anaconda</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/Thinking/%E8%83%BD%E4%B8%8D%E8%83%BD%E4%B8%8D%E7%94%A8Anaconda.html" class="article-date">
  <time datetime="2020-07-06T16:00:00.000Z" itemprop="datePublished">2020-07-07</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Thinking/">Thinking</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>永远不要只依赖于一件事物，否则你拥有不了自由</p> 
      <a class="article-more-link" href="/Thinking/%E8%83%BD%E4%B8%8D%E8%83%BD%E4%B8%8D%E7%94%A8Anaconda.html"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Anaconda/" rel="tag">Anaconda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Config/" rel="tag">Config</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pip/" rel="tag">pip</a></li></ul>

    </footer>
  </div>

   
   
</article>

    
    <article
  id="post-QT 5.15  没有离线安装包了"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/Experience/QT%205.15%20%20%E6%B2%A1%E6%9C%89%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E4%BA%86.html"
    >QT 5.15 Windows 离线预编译安装包</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/Experience/QT%205.15%20%20%E6%B2%A1%E6%9C%89%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E4%BA%86.html" class="article-date">
  <time datetime="2020-06-18T16:00:00.000Z" itemprop="datePublished">2020-06-19</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Experience/">Experience</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>是的, 官方没有, 但可以有</p> 
      <a class="article-more-link" href="/Experience/QT%205.15%20%20%E6%B2%A1%E6%9C%89%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85%E4%BA%86.html"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QT/" rel="tag">QT</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Windows/" rel="tag">Windows</a></li></ul>

    </footer>
  </div>

   
   
</article>

    
    <article
  id="post-Hyper-V 的增强会话能不能自己开"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/Experience/Hyper-V%20%E7%9A%84%E5%A2%9E%E5%BC%BA%E4%BC%9A%E8%AF%9D%E8%83%BD%E4%B8%8D%E8%83%BD%E8%87%AA%E5%B7%B1%E5%BC%80.html"
    >Hyper-V 的增强会话能不能自己开?</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/Experience/Hyper-V%20%E7%9A%84%E5%A2%9E%E5%BC%BA%E4%BC%9A%E8%AF%9D%E8%83%BD%E4%B8%8D%E8%83%BD%E8%87%AA%E5%B7%B1%E5%BC%80.html" class="article-date">
  <time datetime="2020-05-15T16:00:00.000Z" itemprop="datePublished">2020-05-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Experience/">Experience</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>可以</p> 
      <a class="article-more-link" href="/Experience/Hyper-V%20%E7%9A%84%E5%A2%9E%E5%BC%BA%E4%BC%9A%E8%AF%9D%E8%83%BD%E4%B8%8D%E8%83%BD%E8%87%AA%E5%B7%B1%E5%BC%80.html"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hyper-V/" rel="tag">Hyper-V</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Virtualizations/" rel="tag">Virtualizations</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Windows/" rel="tag">Windows</a></li></ul>

    </footer>
  </div>

   
   
</article>

    
    <article
  id="post-Ubuntu 安装 VirtualBox 启用安全启动的方案"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/Repost/Ubuntu%20%E5%AE%89%E8%A3%85%20VirtualBox%20%E5%90%AF%E7%94%A8%E5%AE%89%E5%85%A8%E5%90%AF%E5%8A%A8%E7%9A%84%E6%96%B9%E6%A1%88.html"
    >[Repost] Ubuntu 安装 VirtualBox 启用安全启动的方案</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/Repost/Ubuntu%20%E5%AE%89%E8%A3%85%20VirtualBox%20%E5%90%AF%E7%94%A8%E5%AE%89%E5%85%A8%E5%90%AF%E5%8A%A8%E7%9A%84%E6%96%B9%E6%A1%88.html" class="article-date">
  <time datetime="2020-05-15T16:00:00.000Z" itemprop="datePublished">2020-05-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Repost/">Repost</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>VirtualBox + Secure Boot + Ubuntu = fail</p> 
      <a class="article-more-link" href="/Repost/Ubuntu%20%E5%AE%89%E8%A3%85%20VirtualBox%20%E5%90%AF%E7%94%A8%E5%AE%89%E5%85%A8%E5%90%AF%E5%8A%A8%E7%9A%84%E6%96%B9%E6%A1%88.html"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/" rel="tag">Ubuntu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VirtualBox/" rel="tag">VirtualBox</a></li></ul>

    </footer>
  </div>

   
   
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2019-2021
        <i class="ri-heart-fill heart_icon"></i> Charlie J
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Vankyle"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://data-vankyle-1257862518.cos.ap-shanghai.myqcloud.com/image/Blog/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://data-vankyle-1257862518.cos.ap-shanghai.myqcloud.com/image/Blog/wechat.png">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>